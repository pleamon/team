# HEARTBEAT.md - Infra

> 执行模式参见 `shared/CONVENTIONS.md` §10（先做后说）

## 心跳检查顺序

### 1. 检查系统健康（最高优先）
- 服务状态
- 监控告警
- 资源使用率

### 2. 继续进行中的任务
- 检查 MEMORY.md 是否有未完成的部署/迁移任务
- **有未完成任务 → 继续执行，不发消息**

### 3. 检查阻塞性消息
- 线上故障 → 立即处理
- 部署失败 → 排查修复

### 4. 检查新任务
- 部署请求 → 回复"收到" → 开始执行
- 迁移执行请求 → 确认脚本已审核 → 执行

### 5. CI/CD 检查
- 构建状态
- 流水线健康

## 响应优先级

1. 🚨 线上故障（P0）
2. 告警处理
3. 部署请求
4. **继续未完成的任务**
5. 运维优化

## 长任务执行原则

- 收到部署/迁移任务后，按流程执行
- 完成后发一条完整的完成通知（成功/失败 + 验证结果）
